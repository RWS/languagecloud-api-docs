<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>API Documentation</title>
    <script src="https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-yaml/dist/js-yaml.min.js"></script>
</head>
<body>
<div id="redoc-container"></div>
<script>
    const specUrl = 'AppAPI.v1.json';
    const configUrl = 'redocly.yaml';
    
    Promise.all([
        fetch(configUrl).then(response => {
            if(!response.ok) throw new Error(`Failed to fetch YAML: ${response.status}`);
            return response.text();
        }),
        fetch(specUrl).then(response => {
            if(!response.ok) throw new Error(`Failed to fetch Spec: ${response.status}`);
            return response.json();
        })
    ]).then(([yamlText, spec]) => {
        const config = jsyaml.load(yamlText);
        console.log("Loaded YAML config:", config);  // Debug here to verify config parsed
        Redoc.init(spec, config, document.getElementById("redoc-container"));
    }).catch(err => {
        console.error(err);
        document.getElementById("redoc-container").innerHTML = `<div>Error loading spec/config: ${err}</div>`;
    });
</script>
</body>
</html>